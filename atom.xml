<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[kk Blog —— 通用基础]]></title>
  <link href="http://abcdxyzk.github.io/atom.xml" rel="self"/>
  <link href="http://abcdxyzk.github.io/"/>
  <updated>2024-05-16T17:25:48+08:00</updated>
  <id>http://abcdxyzk.github.io/</id>
  <author>
    <name><![CDATA[kk]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Centos8安装PHP8]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/05/16/lang-centos8-php8/"/>
    <updated>2024-05-16T17:21:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/05/16/lang-centos8-php8</id>
    <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/615971837">https://zhuanlan.zhihu.com/p/615971837</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo dnf install -y epel-release
</span><span class='line'>$ sudo dnf install -y  http://rpms.remirepo.net/enterprise/remi-release-8.5.rpm  # remi-release-8.rpm 要求更高版本centos
</span><span class='line'>$ sudo dnf install -y dnf-utils
</span><span class='line'>$ sudo dnf module list php
</span><span class='line'>$ sudo dnf module reset php
</span><span class='line'>$ sudo dnf module install -y php:remi-8.0
</span><span class='line'>yum install php php-xml php-zip php-mbstring php-gd php-devel php-mysqlnd</span></code></pre></td></tr></table></div></figure>


<hr />

<p>sudo dnf install -y php-fpm</p>

<p>systemctl status php-fpm</p>

<p>systemctl restart php-fpm</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS8 编译内核错误]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/05/16/centos8-kernel/"/>
    <updated>2024-05-16T17:12:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/05/16/centos8-kernel</id>
    <content type="html"><![CDATA[<p><a href="https://koji.mbox.centos.org/koji/buildinfo?buildID=20542">https://koji.mbox.centos.org/koji/buildinfo?buildID=20542</a></p>

<p><a href="https://zhuanlan.zhihu.com/p/535853460">https://zhuanlan.zhihu.com/p/535853460</a></p>

<h4>1. fatal error: openssl/opensslv.h: No such file or directory</h4>

<p>fatal error: openssl/bio.h: No such file or directory</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>A：缺少包，直接yum -y install openssl-devel即可（apt-get install libssl-dev）</span></code></pre></td></tr></table></div></figure>


<h4>2. 其余类似的报错，缺少文件可依次安装：</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>A：yum -y install flex, bison, openssl-devel, elfutils-libelf-devel</span></code></pre></td></tr></table></div></figure>


<h4>3.</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>make[1]: *** No rule to make target 'certs/rhel.pem', needed by 'certs/x509_certificate_list'. Stop.
</span><span class='line'>make: *** [Makefile:1729: certs] Error 2
</span><span class='line'>
</span><span class='line'>A： =&gt; 打开 .config，注释掉这两行
</span><span class='line'>
</span><span class='line'>CONFIG_MODULE_SIG_KEY=""
</span><span class='line'>
</span><span class='line'>CONFIG_SYSTEM_TRUSTED_KEYS=""</span></code></pre></td></tr></table></div></figure>


<h4>4.</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>BTF: .tmp_vmlinux.btf: pahole (pahole) is not available
</span><span class='line'>
</span><span class='line'>Failed to generate BTF for vmlinux
</span><span class='line'>Try to disable CONFIG_DEBUG_INFO_BTF
</span><span class='line'>make: *** [Makefile:1113: vmlinux] Error 1
</span><span class='line'>
</span><span class='line'>A： =&gt; 修改CONFIG_DEBUG_INFO_BTF=n</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS8.5 安装]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/05/11/centos8.5-install/"/>
    <updated>2024-05-11T14:19:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/05/11/centos8.5-install</id>
    <content type="html"><![CDATA[<h4>dracut-initqueue timeout错误</h4>

<p>USB3.0 的U盘可能识别不了，可能需要USB2.0的U盘</p>

<h4>dracut-initqueue timeout错误</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dracut:/# ls -l /dev/disk/by-label/
</span><span class='line'>
</span><span class='line'>lrwxrwxrwx 1 root root 11 May 24 14:25 CentOS-8-5- -&gt; ../../sdd4</span></code></pre></td></tr></table></div></figure>


<p>重启，按e，修改启动参数</p>

<p>将 hd:LABEL=CentOS-8-5-2111-x86_64-dvd 改成上面显示的 hd:LABEL=CentOS-8-5-</p>

<h4>installation source</h4>

<p>需要将ISO放到另一个U盘或者硬盘，可以将硬盘尾部格出一块来放</p>

<h4>efi</h4>

<p>可能需要efi模式，但efi模式好像没法用grub2-install。</p>

<p>目前用另一块盘的centos7 : grub2-mkconfig -o /boot/grub2/grub.cfg 来启动centos8</p>

<hr />

<p><a href="https://www.cnblogs.com/shaoyishi/p/17270213.html">https://www.cnblogs.com/shaoyishi/p/17270213.html</a></p>

<h4>yum</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist</span></code></pre></td></tr></table></div></figure>


<ol>
<li>首先，进入到 yum 的 repos 目录</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /etc/yum.repos.d/</span></code></pre></td></tr></table></div></figure>


<ol>
<li>其次，修改 centos 文件内容</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sed -i 's/mirrorlist/#mirrorlist/g' /etc/yum.repos.d/CentOS-*
</span><span class='line'>sed -i 's|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g' /etc/yum.repos.d/CentOS-*</span></code></pre></td></tr></table></div></figure>


<ol>
<li>然后，生成缓存更新</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum makecache</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[centos 安装 MariaDB]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/04/30/mariadb/"/>
    <updated>2024-04-30T08:33:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/04/30/mariadb</id>
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/weixin_39929918/article/details/110599382">https://blog.csdn.net/weixin_39929918/article/details/110599382</a></p>

<h2>centos7</h2>

<h4>在线安装 &ndash; 慢</h4>

<p><img src="http://abcdxyzk.github.io/images/tools/20240430-1.png" alt="" /></p>

<h4>离线安装</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rpm -qa | grep -i mariadb-libs
</span><span class='line'>rpm -ev --nodeps mariadb-libs-5.5.68-1.el7.x86_64</span></code></pre></td></tr></table></div></figure>


<p>点击图中的 baseurl</p>

<p>下载</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rpm -ivh galera-4-26.4.6-1.el7.centos.x86_64.rpm
</span><span class='line'>rpm -ivh MariaDB-common-10.5.8-1.el7.centos.x86_64.rpm
</span><span class='line'>rpm -ivh MariaDB-compat-10.5.8-1.el7.centos.x86_64.rpm
</span><span class='line'>rpm -ivh MariaDB-shared-10.5.8-1.el7.centos.x86_64.rpm
</span><span class='line'>rpm -ivh MariaDB-client-10.5.8-1.el7.centos.x86_64.rpm
</span><span class='line'>rpm -ivh MariaDB-server-10.5.8-1.el7.centos.x86_64.rpm</span></code></pre></td></tr></table></div></figure>


<h2>centos8</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum install libpmem
</span><span class='line'>rpm -ivh galera-4-26.4.16-1.el8.x86_64.rpm
</span><span class='line'>rpm -ivh MariaDB-common-10.11.7-1.el8.x86_64.rpm MariaDB-shared-10.11.7-1.el8.x86_64.rpm
</span><span class='line'>rpm -ivh MariaDB-client-10.11.7-1.el8.x86_64.rpm
</span><span class='line'>rpm -ivh MariaDB-client-10.11.7-1.el8.x86_64.rpm
</span><span class='line'>rpm -ivh MariaDB-server-10.11.7-1.el8.x86_64.rpm</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ubuntu 编译strongswan]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/04/29/strongswan-make/"/>
    <updated>2024-04-29T14:45:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/04/29/strongswan-make</id>
    <content type="html"><![CDATA[<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>lsb_release -a
</span><span class='line'>
</span><span class='line'>wget https://download2.strongswan.org/old/5.x/strongswan-5.7.2.tar.gz
</span><span class='line'>
</span><span class='line'>sudo apt-get install -y build-essential libpcre3-dev libssl-dev libprotobuf-dev libsqlite3-dev libreadline-dev
</span><span class='line'>sudo apt-get install -y libgmp-dev
</span><span class='line'>sudo apt-get install -y libldap-dev
</span><span class='line'>sudo apt-get install -y libcurl4-openssl-dev 
</span><span class='line'>sudo apt-get install -y libldns-dev
</span><span class='line'>sudo apt-get install -y libunbound-dev
</span><span class='line'>sudo apt-get install -y  pkg-config
</span><span class='line'>sudo apt-get install -y  libsoup2.4-dev 
</span><span class='line'>sudo apt-get install -y libsystemd-dev
</span><span class='line'>sudo apt-get install -y libtspi-dev 
</span><span class='line'>sudo apt-get install libjson-c-dev 
</span><span class='line'>sudo apt-get install libneo27-dev 
</span><span class='line'>sudo apt-get install libneon27-gnutls-dev 
</span><span class='line'>sudo apt-get install -y libpam-dev
</span><span class='line'>
</span><span class='line'>./configure --disable-tss-tss --enable-eap-identity --enable-eap-md5 --enable-eap-mschapv2 --enable-eap-tls --enable-eap-ttls --enable-eap-peap --enable-eap-tnc --enable-eap-dynamic --enable-eap-radius --enable-xauth-eap --enable-xauth-pam --enable-dhcp --enable-openssl --enable-addrblock --enable-unity --enable-certexpire --enable-radattr --enable-tools --enable-openssl --disable-gmp --enable-kernel-libipsec
</span><span class='line'>make -j4
</span><span class='line'>make install
</span><span class='line'>
</span><span class='line'>vim /usr/local/etc/swanctl/swanctl.conf 
</span><span class='line'>
</span><span class='line'>ipsec stop
</span><span class='line'>ipsec start
</span><span class='line'>ipsec statusall
</span><span class='line'>
</span><span class='line'>swanctl --load-all
</span><span class='line'>tail -f /var/log/syslog 
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
</feed>
