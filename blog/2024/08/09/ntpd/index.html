
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>NTP服务配置 - kk Blog —— 通用基础</title>

  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="kk Blog —— 通用基础" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/jquery.min.js"></script>
<!--  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script> -->
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/category.js" type="text/javascript"></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8245190595992760"
     crossorigin="anonymous"></script>

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">kk Blog —— 通用基础</a></h1>
  
    <h2><br>date [-d @int|str] [+%s|"+%F %T"]<br>netstat -ltunp<br>sar -n DEV 1</h2>
  
  <div class="hwx" style='text-align: left; position: absolute; margin-top: -130px; white-space: nowrap;'>
	  <img src="/images/wx_ok.png" width=130px; height=130px;>
	  <img src="/images/ali_ok.png" width=130px; height=130px; style="margin-left:30px;">
  </div>
</hgroup>

</header>
  <nav role="navigation" style='white-space: nowrap; min-width=1120px; position: sticky; top: 0; z-index: 999;'><form action="/search" method="get">
    <input class="search" name="query" id="query" type="text" placeholder="search..." style="height:1.5em;">
    <input id="btnSubmit" value="search" type="submit">
</form>
<script type="text/javascript">

function StringToAscii(str) {
	return str.charCodeAt(0).toString(16);
}

function AsciiToString(asccode) {
	return String.fromCharCode(asccode);
}

function UrlDecode(zipStr) {
	var uzipStr = '';
	for (var i = 0; i < zipStr.length; i += 1) {
		var chr = zipStr.charAt(i);
		if (chr === '+') {
			uzipStr += ' ';
		} else if (chr === '%') {
			var asc = zipStr.substring(i + 1, i + 3);
			if (parseInt('0x' + asc) > 0x7f) {
				uzipStr += decodeURI('%' + asc.toString() + zipStr.substring(i+3, i+9).toString());
				i += 8;
			} else {
				uzipStr += AsciiToString(parseInt('0x' + asc));
				i += 2;
			}
		} else {
			uzipStr += chr;
		}
	}
	return uzipStr;
}

/*
var query = GetRequest("query");
if (query != null) {
	document.getElementById("query").value = UrlDecode(query);
}
*/

var query = window.location.search.substring(1);
var vars = query.split("&");
for (var i = 0; i < vars.length; i ++) {
	var pair = vars[i].split("=");
	if (pair[0] == 'query') {
		document.getElementById('query').value = UrlDecode(pair[1]);
		break;
	}
}

</script>

<!-- Start of Site Search 360 Scripts -->
<!-- Search 360 达到次数后要收费，换成静态索引
<script type="text/javascript">
var ss360Config = {
    siteId: "abcdxyzk.github.io",
    searchBox: {
        selector: "input#query",
        searchButton: "input#query+input[type='submit']"
    }
}
</script>
<script src="https://cdn.sitesearch360.com/v13/sitesearch360-v13.min.js" async></script>
-->
<!-- End of Site Search 360 Scripts -->

<ul class="subscription" data-subscription="rss">
<li>
</li>
  <li><a href="/atom.xml" rel="subscribe-rss">RSS</a></li>
  
</ul>
  
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/download">Download</a></li>
  <li><a href="/search">Search</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h2 class="entry-title">NTP服务配置</h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2024-08-09T16:43:00+08:00'><span class='date'>2024-08-09</span> <span class='time'>16:43:00</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p><a href="https://www.jianshu.com/p/25ab49103e4d">https://www.jianshu.com/p/25ab49103e4d</a></p>

<p><a href="https://www.cnblogs.com/tdyizhen1314/p/17085917.html">https://www.cnblogs.com/tdyizhen1314/p/17085917.html</a></p>

<p><a href="https://www.cnblogs.com/21summer/p/14819406.html">https://www.cnblogs.com/21summer/p/14819406.html</a></p>

<p>vim /etc/ntp.conf</p>

<h4>0 log</h4>

<p>logfile /var/log/ntp.log</p>

<h4>1 restrict</h4>

<p>作用: 对ntp做权限控制</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ignore: 忽略所有类型的NTP连接请求
</span><span class='line'>nomodify: 限制客户端不能使用命令ntpc和ntpq来修改服务器端的时间
</span><span class='line'>noquery: 不提供NTP网络校时服务
</span><span class='line'>notrap: 不接受远程登录请求
</span><span class='line'>notrust: 不接受没有经过认证的客户端的请求
</span><span class='line'>nopeer: 用于阻止主机尝试与服务器对等，并允许欺诈性服务器控制时钟
</span><span class='line'>kod: 访问违规时发送KoD 包。
</span><span class='line'>restrict -6 表示IPV6地址的权限设置。</span></code></pre></td></tr></table></div></figure>


<p>【如果没有用任何参数，那么表示不做任何限制】</p>

<p>例子:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>restrict 10.220.5.0 mask 255.255.255.0 nomodify</span></code></pre></td></tr></table></div></figure>


<p>允许10.220.5.0/24 网段主机进行时间同步</p>

<h4>server</h4>

<p>作用: 指定ntp服务器的地址</p>

<p>格式:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>server host [ key n ] [ version n ] [ prefer ] [ mode n ] [ minpoll n ] [ maxpoll n ] [ iburst ]
</span><span class='line'>
</span><span class='line'>其中host是上层NTP服务器的IP地址或域名，随后所跟的参数解释如下所示：
</span><span class='line'> key：       表示所有发往服务器的报文包含有秘钥加密的认证信息，n是32位的整数，表示秘钥号。
</span><span class='line'> version： 表示发往上层服务器的报文使用的版本号，n默认是3，可以是1或者2。
</span><span class='line'> prefer：   如果有多个server选项，具有该参数的服务器优先使用。
</span><span class='line'> mode：   指定数据报文mode字段的值。
</span><span class='line'> minpoll： 指定与查询该服务器的最小时间间隔为2的n次方秒，n默认为6，范围为4-14。
</span><span class='line'> maxpoll：指定与查询该服务器的最大时间间隔为2的n次方秒，n默认为10，范围为4-14。
</span><span class='line'> iburst：   当初始同步请求时，采用突发方式接连发送8个报文，时间间隔为2秒。</span></code></pre></td></tr></table></div></figure>


<p>server 127.127.1.0 # 将当前主机作为时间服务器</p>

<h3>3、fudge</h3>

<p>作用: 设置时间服务器的层级</p>

<p>格式:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>fudge ip [stratum int]</span></code></pre></td></tr></table></div></figure>


<p>例子:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>fudge 10.225.5.1 stratum 10</span></code></pre></td></tr></table></div></figure>


<p>注意: fudge必须和server一块用， 而且是在server的下一行</p>

<p>stratum 0~15</p>

<p>0: 表示顶级</p>

<p>10: 通常用于给局域网主机提供时间服务</p>

<h4>4、通过 ntpq -p 静态查看NTP服务器与外部NTP服务器同步情况。</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>st: 即stratum阶层，值越小表示ntp serve的精准度越高。
</span><span class='line'>when: 几秒前曾做过时间同步更新的操作。
</span><span class='line'>poll: 表示，每隔多少毫秒与ntp server同步一次。
</span><span class='line'>reach: 已经向上层NTP服务器要求更新的次数。
</span><span class='line'>delay: 网络传输过程钟延迟的时间。
</span><span class='line'>offset: 时间补偿的结果。
</span><span class='line'>jitter: Linux系统时间与BIOS硬件时间的差异时间。</span></code></pre></td></tr></table></div></figure>


<h4>1000s</h4>

<p>ntp服务默认当本地时间与上级ntp时间差超过1000s，那么ntp进程就会退出并在系统日志文件中记录。若不希望出现ntp进程退出的情况，可使用参数选项，如下：</p>

<p>tinker panic 600 时间差超过600，ntp进程会退出。</p>

<p>tinker panic 0   ntp忽略阈值参数检测，不会因为超过阈值而自动将服务down掉，这可以保证ntpd在时间差较大时依然工作。</p>

<h4>开启日志</h4>

<p>使用statsdir和filegen开启统计分析。</p>

<p>设定方式：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>statsdir /var/log/ntpstats/
</span><span class='line'>
</span><span class='line'>statistics loopstats peerstats clockstats
</span><span class='line'>filegen loopstats file loopstats type day enable
</span><span class='line'>filegen peerstats file peerstats type day enable
</span><span class='line'>filegen clockstats file clockstats type day enable</span></code></pre></td></tr></table></div></figure>


<p>当打开统计分析时，ntp会在/var/log/ntpstats/目录下产生filegen中所设定的统计文件。</p>

<h4>更多统计选项</h4>

<p><a href="https://docs.ntpsec.org/latest/ntp_conf.html">https://docs.ntpsec.org/latest/ntp_conf.html</a></p>

<h2 id="monit">6. Monitoring Support</h2>




<div class="sectionbody">
<div class="paragraph">
<p>ntpd(8) includes a comprehensive monitoring facility suitable
for continuous, long term recording of server and client timekeeping
performance. See the <code>statistics</code> command below for a listing and example of
each type of statistics currently supported. Statistic files are managed
using file generation sets and scripts in the ./scripts directory of this
distribution. Using these facilities and UNIX cron(8) jobs, the data
can be automatically summarized and archived for retrospective
analysis.</p>
</div>
<div class="sect2">
<h3 id="_monitoring_commands">6.1. Monitoring Commands</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="statistics"></a><code>statistics</code> <em>name…​</em></dt>
<dd>
<p>Enables writing of statistics records. Currently, ten kinds of
<em>name</em> statistics are supported.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>clockstats</code></dt>
<dd>
<p>Enables recording of clock driver statistics information. Each
update received from a clock driver appends a line of the following
form to the file generation set named <em>clockstats</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">49213 525.624 SPECTRACOM(1) 93 226 00:08:29.606</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Units</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">49213</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MJD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">modified Julian day number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">525.624</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time of day (s) past midnight UTC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPECTRACOM(1)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">receiver identifier (Spectracom unit 1)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">93 226 00:08:29.606</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timecode (format varies by refclock)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The first two fields show the date (Modified Julian Day) and time
(seconds and fraction past UTC midnight). The next
normally shows clock type and unit (but if you are running in strict
Classic compatibility mode it will show the magic clock address in
dotted-quad notation). The final field is the last timecode received from the
clock in decoded ASCII format, where meaningful. For some clock drivers,
a good deal of additional information can be gathered and displayed as
well. See information specific to each clock for further details.</p>
</div>
</dd>
<dt class="hdlist1"><code>loopstats</code></dt>
<dd>
<p>Enables recording of loop filter statistics information. Each update
of the local clock outputs a line of the following form to the file
generation set named <em>loopstats</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">50935 75440.031 0.000006019 13.778190 0.000351733 0.0133806</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Units</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>50935</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MJD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>75440.031</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time past midnight</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.000006019</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">clock offset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>13.778</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PPM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">drift (frequency offset)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.000351733</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RMS jitter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.013380</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PPM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RMS frequency jitter (aka wander)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log<sub>2</sub> s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">clock discipline loop time constant</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The first two fields show the date (Modified Julian Day) and time
(seconds and fraction past UTC midnight). The next five fields show
time offset (seconds), frequency offset (parts per million - PPM),
RMS jitter (seconds), Allan deviation (PPM) and clock discipline
time constant.</p>
</div>
</dd>
<dt class="hdlist1"><code>ntsstats</code></dt>
<dd>
<p>Enables recording of NTS statistics counters on a periodic basis.
Each hour a line of the following form is appended to the file
generation set named <em>ntsstats</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">60209 77147.187 3600 1320 1239 0 2895 2895 11 4104 0 2897 2885 10 0 0 2 0</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Units</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>60209</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MJD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>77147.187</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time past midnight</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3600</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time since reset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1320</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">client requests sent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1239</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">client responses received good</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">client responses received bad</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2895</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server responses sent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2895</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server requests received good</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>11</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server requests received bad</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4104</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookies made</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie decodes not server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2897</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie decodes total</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2885</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie decodes current</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie decodes 1-2 days</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie decodes 2-3 days</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie decodes 3-10 days</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie decodes too old</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie decodes error</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These counters are also available via <em>ntpq</em>'s <em>nts</em> command.</p>
</div>
</dd>
<dt class="hdlist1"><code>ntskestats</code></dt>
<dd>
<p>Enables recording of NTS-KE statistics counters on a periodic basis.
Each hour a line of the following form is appended to the file
generation set named <em>ntskestats</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">60209 77147.187 3600 10 2.914 0.026 2 3.218 0.004 0 0.000 0.000 0 0</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Units</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>60209</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MJD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>77147.187</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time past midnight</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3600</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time since reset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server requests good</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2.914</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server good wall clock time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.026</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server good CPU time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server requests no-TLS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3.218</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server no-TLS wall clock time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.004</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server no-TLS CPU time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server requests bad</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server bad wall clock time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server bad CPU time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">client requests good</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">client requests bad</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These counters are also available via <em>ntpq</em>'s <em>nts</em> command.</p>
</div>
<div class="paragraph">
<p>There are two types of failures for NTS-KE server processing.
The <em>no-TLS</em> slots are for the path when the TLS connection doesn’t get setup.
The <em>bad</em> slots are for the path when the TLS connection does get setup
but there is an error during the NTS-KE exchange.</p>
</div>
<div class="paragraph">
<p>Both are typically caused by bad guys probing for servers to abuse.
A <em>no-TLS</em> event would be caused by a bad guy using unencrypted SMTP while a <em>bad</em> event would be caused by SMTP over TLS.</p>
</div>
</dd>
<dt class="hdlist1"><code>protostats</code></dt>
<dd>
<p>Record significant peer and system events. Each significant
event appends one line to the <code>protostats</code> file set:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">49213 525.624 128.4.1.1 963a 8a <em>message</em></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Units</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>49213</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MJD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>525.624</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time past midnight</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>128.4.1.1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">source address (<code>0.0.0.0</code> for system)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>963a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">status word</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">event message code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>message</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">event message</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The event message code and <em>message</em> field are described on the
"Event Messages and Status Words" page.</p>
</div>
</dd>
<dt class="hdlist1"><code>peerstats</code></dt>
<dd>
<p>Enables recording of peer statistics information. This includes
statistics records of all peers of an NTP server and of special
signals, where present and configured. Each valid update appends a
line of the following form to the current element of a file
generation set named <em>peerstats</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">48773 10847.650 SPECTRACOM(4) 9714 -0.001605376 0.000000000 0.001424877 0.000958674</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Units</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>48773</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MJD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10847.650</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time past midnight</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SPECTRACOM(4)</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">clock name (unit) or source address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>9714</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">status word</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-0.001605376</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">clock offset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.000000000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roundtrip delay</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.001424877</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dispersion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.000958674</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RMS jitter</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The first two fields show the date (Modified Julian Day) and time
(seconds and fraction past UTC midnight). The third field shows
the reference clock type and unit number (but if you are running in
the peer address in dotted-quad notation instead) The fourth field
is a status word, encoded in hex in the format described in
Appendix A of the NTP specification RFC 1305. The final four fields
show the offset, delay, dispersion and RMS jitter, all in seconds.</p>
</div>
</dd>
<dt class="hdlist1"><code>rawstats</code></dt>
<dd>
<p>Enables recording of raw-timestamp statistics information. This
includes statistics records of all peers of an NTP server and of
special signals, where present and configured. Each NTP message
received from a peer or clock driver appends a line of the following
form to the file generation set named <em>rawstats</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">59786 36302.768 2610:20:6f15:15::27 2604:a880:1:20::17:5001 3867818701.119346355 3867818701.152009264 3867818701.152010426 3867818702.768490825 0 3 4 1 13 -29 0.000244 0.000488 .NIST. 0 1 2000</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">59786</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MJD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">36302.768</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time past midnight</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2610:20:6f15:15::27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">source address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2604:a880:1:20::17:5001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">destination address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3867818701.119346355</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTP s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">origin timestamp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3867818701.152009264</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTP s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">receive timestamp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3867818701.152010426</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTP s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">transmit timestamp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3867818702.768490825</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTP s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">destination timestamp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0: OK, 1: insert pending, 2: delete pending, 3: not synced</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">leap warning indicator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 was current in 2012</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTP version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3: client, 4: server, 6: ntpq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mode</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-15, 16: not synced</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">stratum</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log<sub>2</sub> seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poll</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log<sub>2</sub> seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">precision</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.000244</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total roundtrip delay from the remote server to the primary reference clock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.000488</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total dispersion from the remote server to the primary reference clock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.NIST.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP or text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">refid, association ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lost packets since last response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dropped packets since last request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hex integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 if packet accecpted, BOGON flag if packet is discarded</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The first two fields show the date (Modified Julian Day) and time
(seconds and fraction past UTC midnight). The next two fields show
the remote IP Address followed by the local address.
The next four fields show the originate,
receive, transmit and final NTP timestamps in order. The timestamp
values are as received and before processing by the various data
smoothing and mitigation algorithms.</p>
</div>
<div class="paragraph">
<p>A packet that is accecpted is logged.
At most the first dropped packet per request is logged.
That avoids DDoSing the log file.</p>
</div>
<div class="paragraph">
<p>The BOGON flags are decoded <a href="decode.html#flash">here</a>.</p>
</div>
</dd>
<dt class="hdlist1"><code>sysstats</code></dt>
<dd>
<p>Enables recording of ntpd statistics counters on a periodic basis.
Each hour a line of the following form is appended to the file
generation set named <em>sysstats</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">59935 82782.547 3600 36082754 31287166 26510580 4779042 113 19698 1997 428 4773352 0 366120</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Units</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>59935</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MJD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>82782.547</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time past midnight</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3600</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time since reset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>36082754</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets received</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>31287166</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">packets processed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>26510580</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4779042</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">old version(s)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>113</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access denied</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>19698</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bad length or format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1997</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bad authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>428</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">declined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4773352</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rate exceeded</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">kiss-o'-death packets sent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>366120</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTPv1 packets received</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The first two fields show the date (Modified Julian Day) and time
(seconds and fraction past UTC midnight). The remaining ten fields
show the statistics counter values accumulated since the last
generated line.</p>
</div>
</dd>
<dt class="hdlist1"><code>usestats</code></dt>
<dd>
<p>Enables recording of ntpd resource usage statistics.
Each hour a line of the following form is appended to the file
generation set named <em>usestats</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">57570 83399.541 3600 0.902 1.451 164 0 0 0 2328 64226 1 0 4308</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Units</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>57570</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MJD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>83399.541</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time past midnight</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3600</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time since reset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.902</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_utime: CPU seconds - user mode</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1.451</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_stime: CPU seconds - system</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>164</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_minflt: page faults - reclaim/soft (no I/O)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_majflt: page faults - I/O</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_nswap: process swapped out</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_inblock: file blocks in</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2328</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_oublock: file blocks out</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>64226</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_nvcsw: context switches, wait</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_nivcsw: context switches, preempts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_nsignals: signals</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4308</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru_maxrss: resident set size, kilobytes</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The first two fields show the date (Modified Julian Day) and time
(seconds and fraction past UTC midnight).  The ru_ tags are the
names from the rusage struct.  See <code>man getrusage</code> for details.
(The NetBSD and FreeBSD man pages have more details.)
The maxrss column is the high water mark since the process was started.
The remaining fields show the values used since the last report.</p>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="statsdir"></a><code>statsdir</code> <em>directory_path</em></dt>
<dd>
<p>Indicates the full path of a directory where statistics files should
be created (see below). This keyword allows the (otherwise constant)
<em>filegen</em> filename prefix to be modified for file generation sets,
which is useful for handling statistics logs.</p>
</dd>
<dt class="hdlist1"><a id="filegen"></a><code>filegen</code> <em>name</em> [<code>file</code> <em>filename</em>] [<code>type</code> <em>typename</em>] [<code>link</code> | <code>nolink</code>] [<code>enable</code> | <code>disable</code>]</dt>
<dd>
<p>Configures setting of the generation file set name. Generation file sets
provide a means for handling files that are continuously growing
during the lifetime of a server. Server statistics are a typical
example for such files. Generation file sets provide access to a set
of files used to store the actual data. At any time at most one
element of the set is being written to. The type given specifies
when and how data will be directed to a new element of the set. This
way, information stored in elements of a file set that are currently
unused are available for administrative operations without the
risk of disturbing the operation of ntpd. (Most important: they can
be removed to free space for new data produced.)</p>
<div class="paragraph">
<p>Note that this command can be sent from the
ntpq(1) program running at a remote location.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>name</code></dt>
<dd>
<p>This is the type of the statistics records, as shown in the
<em>statistics</em> command.</p>
</dd>
<dt class="hdlist1"><code>file</code> <em>filename</em></dt>
<dd>
<p>This is the file name for the statistics records. Filenames of set
members are built from three concatenated elements <em>prefix</em>,
<em>filename</em> and <em>suffix</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>prefix</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is a constant filename path. It is not subject to
        modifications via the <em>filegen</em> option. It is defined by the
        server, usually specified as a compile-time constant. It may,
        however, be configurable for individual file generation sets via
        other commands. For example, the prefix used with <em>loopstats</em>
        and <em>peerstats</em> generation can be configured using the
        <em>statsdir</em> option explained above.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>filename</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This string is directly concatenated to the prefix mentioned
        above (no intervening ‘/’). This can be modified using the file
        argument to the <em>filegen</em> statement. No <code>..</code> elements are
        allowed in this component to prevent filenames referring to
        parts outside the filesystem hierarchy denoted by <em>prefix</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>suffix</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This part is reflects individual elements of a
    file set. It is generated according to the type of a file set.</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1"><code>type</code> <em>typename</em></dt>
<dd>
<p>A file generation set is characterized by its type. The following
types are supported:
// The following are tables only because indent lists cannot be
// nested more than 2 deep.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>none</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The file set is actually a single plain file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One element of file set is used per incarnation of a ntpd
        server. This type does not perform any changes to file set
        members during runtime, however it provides an easy way of
        separating files belonging to different ntpd(8) server
        incarnations. The set member filename is built by appending a
        ‘.’ to concatenated prefix and filename strings, and appending the
        decimal representation of the process ID of the
        ntpd(8) server process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>day</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One file generation set element is created per day. A day is
        defined as the period between 00:00 and 24:00 UTC. The file set
        member suffix consists of a ‘.’ and a day specification in the
        form <em>YYYYMMdd</em>. <em>YYYY</em> is a 4-digit year number (e.g., 1992).
        <em>MM</em> is a two digit month number. <em>dd</em> is a two digit day
        number. Thus, all information written at 10 December 1992 would
        end up in a file named <em>prefix</em> <em>filename</em>.19921210.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>week</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any file set member contains data related to a certain
    week of a year. The term week is defined by computing
    day-of-year modulo 7. Elements of such a file generation set
    are distinguished by appending the following suffix to the
    file set filename base: A dot, a 4-digit year number, the
    letter <em>W</em>, and a 2-digit week number. For example,
    information from January, 10th 1992 would end up in a file
    with suffix <em>1992W1</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>month</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One generation file set element is generated per
    month. The file name suffix consists of a dot, a 4-digit year
    number, and a 2-digit month.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>year</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One generation file element is generated per year.
    The filename  suffix consists of a dot and a 4 digit year number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>age</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This type of file generation sets changes to a new element of
        the file set every 24 hours of server operation. The filename
        suffix consists of a dot, the letter <em>a</em>, and an 8-digit number.
        This number is taken to be the number of seconds the server is
        running at the start of the corresponding 24-hour period.</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1"><code>link</code> | <code>nolink</code></dt>
<dd>
<p>It is convenient to be able to access the current element of a
file generation set by a fixed name. This feature is enabled by
specifying <code>link</code> and disabled using <code>nolink</code>. If link is
specified, a hard link from the current file set element to a file
without suffix is created. When there is already a file with this
name and the number of links of this file is one, it is renamed
appending a dot, the letter <em>C</em>, and the pid of the ntpd server
process. When the number of links is greater than one, the file is
unlinked. This allows the current file to be accessed by a
constant name.</p>
</dd>
<dt class="hdlist1"><code>enable</code> | <code>disable</code></dt>
<dd>
<p>Enables or disables the recording function.
Information is only written to a file generation by specifying
<code>enable</code>; output is prevented by specifying <code>disable</code>.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>



</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">kk</span></span>

      




<time class='entry-date' datetime='2024-08-09T16:43:00+08:00'><span class='date'>2024-08-09</span> <span class='time'>16:43:00</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/cats/system/'>system</a>, <a class='category' href='/blog/cats/system~base/'>base</a>
  
</span>


    </p>
    
      
    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2024/08/09/lang-date/" title="Previous Post: unix时间戳, excel date, 儒略日julian date">&laquo; unix时间戳, excel date, 儒略日julian date</a>
      
      
        <a class="basic-alignment right" href="/blog/2024/08/09/ntpd-log/" title="Next Post: NTP log 记录每次发包">NTP log 记录每次发包 &raquo;</a>
      
    </p>
    <p class="meta">
	<div style='white-space: nowrap;'>
	<img src="/images/wx_ok.png" width=150px; height=150px; style="margin-left:100px;">
	<img src="/images/ali_ok.png" width=150px; height=150px; style="margin-left:100px;">
	</div>
    </p>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8245190595992760"
     crossorigin="anonymous"></script>
<!-- 横向单元广告 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8245190595992760"
     data-ad-slot="1950632689"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<!-- alert 替代 -->
<script type="text/javascript">
	cssCode = "<style type='text/css'>"
		+ ".nbaMask { position: fixed; z-index: 1000; top: 0; right: 0; left: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); } "
		+ ".nbaMaskTransparent { position: fixed; z-index: 1000; top: 0; right: 0; left: 0; bottom: 0; } "
		+ ".nbaDialog { position: fixed; z-index: 5000; width: 80%; max-width: 500px; top: 50%; left: 50%; -webkit-transform: translate(-50%, -50%); transform: translate(-50%, -50%); background-color: #fff; text-align: center; border-radius: 8px; overflow: hidden; opacity: 1; color: white; }"
		+ ".nbaDialog .nbaDialogHd { padding: .2rem .27rem .08rem .27rem; text-align: left; padding-left: 10px; padding-top: 10px; } "
		+ ".nbaDialog .nbaDialogHd .nbaDialogTitle { color:black; font-size: 17px; font-weight: 400; } "
		+ ".nbaDialog .nbaDialogBd { padding: 0 .27rem; font-size: 15px; line-height: 1.3; word-wrap: break-word; word-break: break-all; color: #000000; } "
		+ ".nbaDialog .nbaDialogFt { background: #1a6ada; float: right; margin-right:10px; margin-bottom:10px; position: relative; border-radius: 5px; width:60px;  line-height: 30px; font-size: 15px; display: -webkit-box; display: -webkit-flex; display: flex; } "
		+ ".nbaDialog .nbaDialogFt:after { content: ' '; position: absolute; left: 0; top: 0; right: 0; height: 1px; border-top: 1px solid #e6e6e6; color: #e6e6e6; -webkit-transform-origin: 0 0; transform-origin: 0 0; -webkit-transform: scaleY(0.5); transform: scaleY(0.5); } "
		+ ".nbaDialog .nbaDialogBtn { display: block; -webkit-box-flex: 1; -webkit-flex: 1; flex: 1; color: white; text-decoration: none; -webkit-tap-highlight-color: transparent; position: relative; margin-bottom: 0; } "
		+ ".nbaDialog .nbaDialogBtn:after { content: ' '; position: absolute; left: 0; top: 0; width: 1px; bottom: 0; border-left: 1px solid #e6e6e6; color: #e6e6e6; -webkit-transform-origin: 0 0; transform-origin: 0 0; -webkit-transform: scaleX(0.5); transform: scaleX(0.5); } "
		+ ".nbaDialog a { text-decoration: none; -webkit-tap-highlight-color: transparent; }"
		+ "</style>";

	htmlCode = "<div id='dialogs2' style='display: none'>"
		+ "  <div class='nbaMask'></div>"
		+ "  <div class='nbaDialog'>"
		+ "    <div class='nbaDialogHd'>"
		+ "        <strong class='nbaDialogTitle'>提示：</strong>"
		+ "    </div><br>"
		+ ' <div style="white-space: nowrap;"> <img src="/images/wx_ok.png" width="130px;" height="130px;"> <img src="/images/ali_ok.png" width="130px;" height="130px;" style="margin-left:100px;"> </div> '
		+ "    <div class='nbaDialogBd' id='dialog_msg2' style='white-space:normal;'>弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>"
		+ "    <div class='nbaDialogHd'>"
		+ "        <strong class='nbaDialogTitle'></strong>"
		+ "    </div><br>"
		+ "    <div class='nbaDialogFt'>"
		+ "        <a href='javascript:;' class='nbaDialogBtn nbaDialogBtnPrimary' style='display:none;' id='dialog_ok2'>确定</a>"
		+ "    </div>"
		+ "  </div>"
		+ "</div>";

	htmlCode2 = "<div id='dialogs22' style='display: none;'>"
		+ "  <div class='nbaDialog' id='dialogs22_s' style='background:gray; top:50%; border-radius: 18px;'>"
		+ "    <div class='nbaDialogBd' id='dialog_msg22' style='white-space:normal; color:white;padding-top:10px;'>弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>"
		+ "    <div class='nbaDialogHd'>"
		+ "        <strong class='nbaDialogTitle'></strong>"
		+ "    </div>"
		+ "  </div>"
		+ "</div>";

function showd()
{
	document.getElementById("dialog_ok2").style.display = '';
}

function alert_money(msg) {
	var div = document.createElement("div");
	div.innerHTML = cssCode + htmlCode;
	document.body.appendChild(div);

	var dialogs2 = document.getElementById("dialogs2");
	dialogs2.style.display = 'block';

	var dialog_msg2 = document.getElementById("dialog_msg2");
	dialog_msg2.innerHTML = msg;

	// var dialog_cancel = document.getElementById("dialog_cancel");
	//	dialog_cancel.onclick = function() {
	//	dialogs2.style.display = 'none';
	// };
	var dialog_ok2 = document.getElementById("dialog_ok2");
	dialog_ok2.onclick = function() {
		dialogs2.style.display = 'none';
		//callback();
	};

	setTimeout("showd()", 10*1000);
};

alert_money('');

</script>


  </footer>
</article>

</div>
<aside class="sidebar" id='load_sidebar'>
</aside>
<script type="text/javascript">
  $('#load_sidebar').load('/sidebar.html');
</script>

    </div>
  </div>
  <footer role="contentinfo">  Copyright &copy; 2025 - kk -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <a title="Top" href="#" id="scroll2top" style="position: fixed; height: 50px; bottom: 30px; right: 25px; cursor: pointer; z-index: 9999; display: block; opacity: 1;"><img src="/images/scrollup.png"></a>
  <script src="/javascripts/scroll2top.js"></script>

<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//www.abcxyzkk.xyz/matomo/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->


<!-- Histats.com  (div with counter) --><div id="histats_counter"></div>
<!-- Histats.com  START  (aync)-->
<!--
<script type="text/javascript">var _Hasync= _Hasync|| [];
_Hasync.push(['Histats.start', '1,4673876,4,107,170,20,00010000']);
_Hasync.push(['Histats.fasi', '1']);
_Hasync.push(['Histats.track_hits', '']);
(function() {
var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
hs.src = ('//s10.histats.com/js15_as.js');
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
})();</script>
<noscript><a href="/" target="_blank"><img  src="//sstatic1.histats.com/0.gif?4673876&101" alt="simple hit counter" border="0"></a></noscript>
-->
<!-- Histats.com  END  -->

<!--  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253604690'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1253604690' type='text/javascript'%3E%3C/script%3E"));</script>
-->


<!--
<script>

// TODO 无法获取框架内元素
function autoads()
{
try {
	console.log('start');
	var txt = document.getElementById('mys-content').innerHTML;
	var len = txt.length;
	var url = '';
	console.log(len);
	for (var i = 0; i < len - 10; i ++) {
		if (txt.substring(i, i + 6) == 'href="') {
			i = i + 6;
			url = '';
			for ( ; i < len; i ++) {
				if (txt[i] == '"')
					break;
				url += txt[i];
			}
			url = url.replace(/&amp;/g, '&');
		//	console.log(url);
		}
	}
	console.log(url);
	if (url != '' && Math.random() < 0.3)
		window.open(url, "_blank");
} catch (e) {
}
}

window.onload = function() {
	setTimeout("autoads()", 5*1000);
}
</script>
-->


</footer>
  





</body>
</html>
