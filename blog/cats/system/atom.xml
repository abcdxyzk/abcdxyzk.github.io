<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: system | kk Blog —— 通用基础]]></title>
  <link href="http://abcdxyzk.github.io/blog/cats/system/atom.xml" rel="self"/>
  <link href="http://abcdxyzk.github.io/"/>
  <updated>2024-07-15T14:01:10+08:00</updated>
  <id>http://abcdxyzk.github.io/</id>
  <author>
    <name><![CDATA[kk]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Linux查看电池损耗]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/07/15/bat/"/>
    <updated>2024-07-15T11:31:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/07/15/bat</id>
    <content type="html"><![CDATA[<p><a href="https://www.dbs724.com/435077.html">https://www.dbs724.com/435077.html</a></p>

<p>查看当前电池的容量</p>

<pre><code>    cat /sys/class/power_supply/BAT0/capacity
</code></pre>

<p>查询电池的状态</p>

<pre><code>    cat /sys/class/power_supply/BAT0/status
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS7 yum]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/07/12/centos7-yum/"/>
    <updated>2024-07-12T17:14:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/07/12/centos7-yum</id>
    <content type="html"><![CDATA[<h4>centos7 阿里云 yum</h4>

<p>备份原有的YUM仓库配置文件</p>

<pre><code>    sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
</code></pre>

<p>下载阿里云的CentOS仓库配置文件</p>

<pre><code>    sudo curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
</code></pre>

<p>清理缓存并生成新的仓库缓存</p>

<pre><code>    sudo yum clean all
    sudo yum makecache
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[grub2-mkconfig]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/06/20/centos-mkconfig/"/>
    <updated>2024-06-20T15:09:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/06/20/centos-mkconfig</id>
    <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/linuxcmd/p/grub2-mkconfig.html">https://www.cnblogs.com/linuxcmd/p/grub2-mkconfig.html</a></p>

<pre><code>    用法: grub2-mkconfig [OPTION]
    生成 grub 配置文件

      -o, --output=FILE       将生成的配置输出到 FILE 文件 [default=stdout]
      -h, --help              打印这个文件并退出
      -v, --version           打印版本信息并退出

    报告 Bug 通过 &lt;bug-grub@gnu.org&gt;.
</code></pre>

<pre><code>    grub2-mkconfig -o /boot/grub2/grub.cfg

    # 或者

    grub2-mkconfig &gt; /boot/grub2/grub.cfg
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rpmbuild 错误：发现已安装(但未打包的)文件]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/05/17/rpmbuild-check/"/>
    <updated>2024-05-17T16:26:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/05/17/rpmbuild-check</id>
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/developerof/article/details/112139268">https://blog.csdn.net/developerof/article/details/112139268</a></p>

<p>首先就是正面解决，把未打包的文件给打包了</p>

<p>如果确实不需要打包，那么就可以按照如下方式修改。</p>

<h4>修改spec文件</h4>

<p>在%install下面添加</p>

<pre><code>    %define _unpackaged_files_terminate_build 0
</code></pre>

<h4>路径</h4>

<pre><code>    vim /usr/lib/rpm/macros

    #%__check_files %{_rpmconfigdir}/check-files %{buildroot}
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS8 编译内核错误]]></title>
    <link href="http://abcdxyzk.github.io/blog/2024/05/16/centos8-kernel/"/>
    <updated>2024-05-16T17:12:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2024/05/16/centos8-kernel</id>
    <content type="html"><![CDATA[<p><a href="https://koji.mbox.centos.org/koji/buildinfo?buildID=20542">https://koji.mbox.centos.org/koji/buildinfo?buildID=20542</a></p>

<p><a href="https://zhuanlan.zhihu.com/p/535853460">https://zhuanlan.zhihu.com/p/535853460</a></p>

<h4>1. fatal error: openssl/opensslv.h: No such file or directory</h4>

<p>fatal error: openssl/bio.h: No such file or directory</p>

<pre><code>    A：缺少包，直接yum -y install openssl-devel即可（apt-get install libssl-dev）
</code></pre>

<h4>2. 其余类似的报错，缺少文件可依次安装：</h4>

<pre><code>    A：yum -y install flex, bison, openssl-devel, elfutils-libelf-devel
</code></pre>

<h4>3.</h4>

<pre><code>    make[1]: *** No rule to make target 'certs/rhel.pem', needed by 'certs/x509_certificate_list'. Stop.
    make: *** [Makefile:1729: certs] Error 2

    A： =&gt; 打开 .config，注释掉这两行

    CONFIG_MODULE_SIG_KEY=""

    CONFIG_SYSTEM_TRUSTED_KEYS=""
</code></pre>

<h4>4.</h4>

<pre><code>    BTF: .tmp_vmlinux.btf: pahole (pahole) is not available

    Failed to generate BTF for vmlinux
    Try to disable CONFIG_DEBUG_INFO_BTF
    make: *** [Makefile:1113: vmlinux] Error 1

    A： =&gt; 修改CONFIG_DEBUG_INFO_BTF=n
</code></pre>
]]></content>
  </entry>
  
</feed>
