<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: system~centos | kk Blog —— 通用基础]]></title>
  <link href="http://abcdxyzk.github.io/blog/cats/system~centos/atom.xml" rel="self"/>
  <link href="http://abcdxyzk.github.io/"/>
  <updated>2024-04-26T14:38:06+08:00</updated>
  <id>http://abcdxyzk.github.io/</id>
  <author>
    <name><![CDATA[kk]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[CentOS 多IP配置]]></title>
    <link href="http://abcdxyzk.github.io/blog/2023/01/30/centos-ips/"/>
    <updated>2023-01-30T11:40:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2023/01/30/centos-ips</id>
    <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/dachenyi/p/15980164.html">https://www.cnblogs.com/dachenyi/p/15980164.html</a></p>

<p><a href="https://www.cnblogs.com/jiftle/p/16692400.html">https://www.cnblogs.com/jiftle/p/16692400.html</a></p>

<h4>关闭 rp_filter 校验</h4>

<p>在 /etc/sysctl.conf 或 /usr/lib/sysctl.d/50-default.conf 中关闭反向过滤</p>

<p>反向过滤指系统在接收到一个 IP 包后检查该 IP 是否符合要求，不合要求则被丢弃。</p>

<p>例如：用户在 A 网卡上收到一个 IP 包，发送 IP 为 B。而给 B 的 IP 发送时用的网卡不是 A，则会丢弃。由于默认路由走的是主网卡，所以开启反向过滤后，辅助网卡上的 IP 会 ping 不通。</p>

<p>net.ipv4.conf.default.rp_filter = 0
net.ipv4.conf.all.rp_filter = 0</p>

<h4>cfg</h4>

<p>cd /etc/sysconfig/network-scripts/</p>

<p>vim ifcfg-eth0</p>

<pre><code>    IPADDR0=172.27.0.10
    IPADDR1=172.27.0.11
    PREFIX=24
    GATEWAY0=172.27.0.1
    GATEWAY1=172.27.0.1

    DEFROUTE=yes        # 双网卡都配网关
    IPV4_ROUTE_METRIC=10    # 0-100 数字越小优先级越高，但是默认网关只能有一个，相当于主备网关, 只有当主网关断掉了，备用网关才会生效
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS的pcspkr模块, 报警声]]></title>
    <link href="http://abcdxyzk.github.io/blog/2022/10/01/centos-bill/"/>
    <updated>2022-10-01T21:50:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2022/10/01/centos-bill</id>
    <content type="html"><![CDATA[<p><a href="http://code.js-code.com/centos/120705.html">http://code.js-code.com/centos/120705.html</a></p>

<h4>加载pcspkr模块打开beep</h4>

<pre><code>    [root@localhost~]# modprobe pcspkr
    [root@localhost~]# lsmod | grep pcspkr
    pcspkr  20000
</code></pre>

<h4>卸载pcspkr模块关闭beep</h4>

<pre><code>    [root@localhost~]# rmmod pcspkr
</code></pre>

<h4>永久禁止加载pcspkr模块</h4>

<pre><code>    [root@localhost~]# vim /etc/modprobe.d/blacklist.conf
    blacklist pcspkr


    [root@localhost~]# vim /etc/rc.local
    /sbin/rmmod pcspkr
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS 1G以内内存调优]]></title>
    <link href="http://abcdxyzk.github.io/blog/2022/08/20/centos-setting/"/>
    <updated>2022-08-20T16:18:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2022/08/20/centos-setting</id>
    <content type="html"><![CDATA[<pre><code>    echo 1 &gt; /proc/sys/kernel/softlockup_panic

    echo 0 &gt; /proc/sys/net/mptcp/mptcp_enabled
    echo 0 &gt; /proc/sys/net/ipv4/tcp_timestamps
    echo 0 &gt;  /proc/sys/net/ipv4/tcp_max_tw_buckets
    echo "4096 16384 256000" &gt; /proc/sys/net/ipv4/tcp_wmem
    echo "4096 16384 256000" &gt; /proc/sys/net/ipv4/tcp_rmem
    echo 6 &gt; /proc/sys/net/ipv4/tcp_retries2
    echo 0 &gt; /proc/sys/net/ipv4/tcp_syncookies
    # echo 128 &gt; /proc/sys/net/ipv4/tcp_max_syn_backlog

    echo 99 &gt; /proc/sys/vm/swappiness
    service irqbalance stop

    #rm -rf /usr/local/share/aliyun-assist/
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS救援模式--rescue模式]]></title>
    <link href="http://abcdxyzk.github.io/blog/2021/07/20/centos-resuce/"/>
    <updated>2021-07-20T15:58:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2021/07/20/centos-resuce</id>
    <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/chenglee/p/10383885.html">https://www.cnblogs.com/chenglee/p/10383885.html</a></p>

<p>用途：系统无法进入，如grub损坏或某个配置文件改错</p>

<p>进入系统安装盘界面，先选Troubleshooting，再选Rescue installed system</p>

<p><img src="/images/system/20210720-11.png" alt="" /></p>

<p><img src="/images/system/20210720-12.png" alt="" /></p>

<p>进入后等待最终进入提示模式，输入 1 或 3 回车</p>

<p><img src="/images/system/20210720-13.png" alt="" /></p>

<p>然后输入chroot /mnt/sysimage 切换到原linux系统，切换后前缀会变为bash ，然后就可以修改root密码或配置文件了</p>

<p><img src="/images/system/20210720-14.png" alt="" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[centos 设置默认启动内核]]></title>
    <link href="http://abcdxyzk.github.io/blog/2020/05/19/centos-set-kernel/"/>
    <updated>2020-05-19T11:21:00+08:00</updated>
    <id>http://abcdxyzk.github.io/blog/2020/05/19/centos-set-kernel</id>
    <content type="html"><![CDATA[<p><a href="https://www.4spaces.org/centos7-change-kernel-order/">https://www.4spaces.org/centos7-change-kernel-order/</a></p>

<h4>查看当前默认启动内核</h4>

<pre><code>    grub2-editenv list
</code></pre>

<h4>查看所有内核</h4>

<pre><code>    cat /boot/grub2/grub.cfg | grep menuentry
    menuentry 'CentOS Linux (3.10.0-693.5.2.el7.x86_64) 7 (Core)' --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-3.10.0-693.el7.x86_64-advanced-a5c5c2e2-9baf-46e5-9703-ee9d6b421f66' {
</code></pre>

<h4>设置新的启动内核</h4>

<pre><code>    grub2-set-default 'CentOS Linux (3.10.0-693.5.2.el7.x86_64) 7 (Core)'
</code></pre>
]]></content>
  </entry>
  
</feed>
